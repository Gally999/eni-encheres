<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	data-th-replace="~{layouts/layout :: layout-encheres( 
					titrePage=~{:: title},
					contenuPage=~{:: main},
					ressourcesSupp=~{:: #ressources-css})}">

<head>
<!-- Films comme titre de page -->
<title data-th-text="#{view-encheres.title}"></title>
<!-- Ajout de CSS general.css -->
<th:block id="ressources-css">
	<link rel="stylesheet" data-th-href="@{/css/general.css}">
	<link rel="stylesheet" data-th-href="@{/css/filter-form.css}">
</th:block>


</head>
<body>
	<main>
		<h1 data-th-text="#{view-encheres.h1}"></h1>
		<form 	class="filter-form"
				data-th-action="@{/}" method="get">
			<div class="filter-selectors">
				<h2>Filtres :</h2>
				<label hidden for="keyword"></label>
				<input type="text" name="keyword" id="keyword" size="50" data-th-value="${keyword}" placeholder="Le nom de l'article contient"/>
				<div class="filter-cat">
					<label for="catSelect">Catégorie :</label>
					<select name="categorieId" id="catSelect">
						<option data-th-value="null">Toutes les catégories</option>
						<option
								data-th-each="c : ${categoriesEnSession}"
								data-th-text="${c.libelle}"
								data-th-value="${c.id}"
								data-th-selected="${#bools.isTrue(categorieId == c.id)}"
						></option>
					</select>
				</div>
			</div>
			<div class="filter-buttons">
				<button type="submit">Rechercher</button>
				<button><a href="/">Annuler</a></button>
			</div>
		</form>
		<th:block data-th-if="${!#lists.isEmpty(encheresActives)}">
			<ul class="article-ul">
				<li class="article-cards" data-th-each="article : ${encheresActives}">
					<h3 data-th-text="${article.nom}"></h3>
					<p>Prix : 
						<span data-th-text="${article.prixVente} ? ${article.prixVente} : ${article.prixInitial}"></span>
					 point(s)</p>
					<p>Fin de l'enchère : <span data-th-text="${#temporals.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></span></p>
					<p>Vendeur : <span data-th-text="${article.vendeur.pseudo}"></span></p>
				</li>
			</ul>
		</th:block>
		<th:block data-th-unless="${!#lists.isEmpty(encheresActives)}">
			<h2 data-th-text="#{view-encheres.empty}"></h2>
		</th:block>
	</main>
</body>
</html>
